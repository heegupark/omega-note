{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useEffect, useState } from 'react';\nimport { createStyles, makeStyles } from '@material-ui/core/styles';\nimport { HiDotsHorizontal } from 'react-icons/hi';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Modal from '@material-ui/core/Modal';\nimport Button from '@material-ui/core/Button';\nconst useStyles = makeStyles(theme => createStyles({\n  title: {\n    outline: 'none',\n    width: '95%',\n    paddingLeft: '15px',\n    margin: '0px',\n    border: 'none',\n    backgroundColor: 'rgb(248,248,248)',\n    fontSize: '24px'\n  },\n  editor: {\n    width: '100%',\n    minWidth: '400px',\n    wordBreak: 'break-word',\n    paddingBottom: '10px',\n    '&:hover': {\n      backgroundColor: 'white'\n    }\n  },\n  editorInTrash: {\n    width: '100%',\n    minWidth: '600px',\n    wordBreak: 'break-word',\n    padding: '15px'\n  },\n  dot: {\n    position: 'absolute',\n    float: 'right',\n    right: '20px',\n    cursor: 'pointer',\n    marginTop: '10px'\n  },\n  modal: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  paper: {\n    backgroundColor: 'rgb(222, 222, 222)',\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(1, 2, 2),\n    textAlign: 'center',\n    width: '350px',\n    borderRadius: '5px',\n    fontSize: '12px',\n    outline: 'none'\n  },\n  button: {\n    height: '30px',\n    margin: '10px 15px'\n  }\n}));\nconst theme = 'snow';\nconst placeholder = `What's in your mind?`;\nconst modules = {\n  toolbar: [[{\n    header: '1'\n  }, {\n    header: '2'\n  }, {\n    font: []\n  }, {\n    color: []\n  }], [{\n    size: []\n  }], ['bold', 'italic', 'underline', 'strike', 'blockquote'], [{\n    list: 'ordered'\n  }, {\n    list: 'bullet'\n  }, {\n    indent: '-1'\n  }, {\n    indent: '+1'\n  }], ['link', 'image', 'video'], ['clean']],\n  clipboard: {\n    matchVisual: false\n  }\n};\nconst formats = ['header', 'font', 'color', 'size', 'bold', 'italic', 'underline', 'strike', 'blockquote', 'list', 'bullet', 'indent', 'link', 'image' // 'video',\n];\nexport default function Editor(props) {\n  const {\n    0: isOpen,\n    1: setOpen\n  } = useState(false);\n  const ReactQuill = false ? require('react-quill') : () => false;\n  const classes = useStyles();\n  const {\n    0: title,\n    1: setTitle\n  } = useState('');\n  const {\n    0: isDeleted,\n    1: setIsDeleted\n  } = useState(false);\n  const {\n    0: contents,\n    1: setContents\n  } = useState('');\n  const {\n    0: lastNotebook,\n    1: setLastNotebook\n  } = useState('');\n  const [anchorEl, setAnchorEl] = React.useState(null);\n  const [modalOpen, setModalOpen] = React.useState(false);\n\n  const handleModalOpen = () => {\n    handlePopoverClose();\n    setModalOpen(true);\n  };\n\n  const handleModalClose = () => {\n    setModalOpen(false);\n  };\n\n  const handlePopoverOpen = event => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handlePopoverClose = () => {\n    setAnchorEl(null);\n  };\n\n  useEffect(() => {\n    setOpen(true);\n  }, []);\n\n  const handleChange = html => {\n    setContents(html);\n    const newNote = {\n      noteTitle: undefined,\n      note: html\n    };\n    props.updateNote(props.notebooks[props.notebook].id, props.currentNoteId, newNote);\n  };\n\n  const getNote = (notebookId, noteId) => {\n    const newContents = props.notebooks[notebookId].notes.filter(note => note.id === noteId);\n\n    if (newContents.length) {\n      setTitle(newContents[0].noteTitle);\n      setContents(newContents[0].note);\n      setIsDeleted(newContents[0].isDeleted);\n      setLastNotebook(newContents[0].lastNotebook);\n    }\n  };\n\n  useEffect(() => {\n    getNote(props.notebook, props.currentNoteId);\n  }, [props.notebook, props.currentNoteId]);\n\n  const handleTitleChange = e => {\n    setTitle(e.target.value);\n    const newNote = {\n      noteTitle: e.target.value,\n      note: undefined\n    };\n    props.updateNote(props.notebooks[props.notebook].id, props.currentNoteId, newNote);\n  };\n\n  const handleMoveToTrash = () => {\n    props.moveNote(props.notebook, 'trash', props.currentNoteId);\n    handlePopoverClose();\n  };\n\n  const handleRestore = () => {\n    props.moveNote('trash', lastNotebook, props.currentNoteId);\n    handlePopoverClose();\n  };\n\n  const handleDelete = () => {\n    props.deleteNote('trash', props.currentNoteId);\n    handlePopoverClose();\n    handleModalClose();\n  };\n\n  return __jsx(React.Fragment, null, isDeleted ? __jsx(React.Fragment, null, __jsx(\"span\", {\n    className: classes.title,\n    onClick: () => props.handleSnackbar('You can not update a note title in the Trash', 'error')\n  }, title), __jsx(Menu, {\n    id: \"dot-menu\",\n    anchorEl: anchorEl,\n    keepMounted: true,\n    open: Boolean(anchorEl),\n    onClose: handlePopoverClose\n  }, __jsx(MenuItem, {\n    onClick: handleRestore\n  }, \"Restore\"), __jsx(MenuItem, {\n    onClick: handleModalOpen\n  }, \"Delete\")), __jsx(\"span\", {\n    className: classes.dot,\n    onClick: handlePopoverOpen\n  }, __jsx(HiDotsHorizontal, null)), __jsx(\"div\", {\n    className: classes.editorInTrash,\n    dangerouslySetInnerHTML: {\n      __html: contents\n    },\n    onClick: () => props.handleSnackbar('You can not update a note in the Trash', 'error')\n  }), __jsx(Modal, {\n    open: modalOpen,\n    \"aria-labelledby\": \"simple-modal-title\",\n    \"aria-describedby\": \"simple-modal-description\",\n    className: classes.modal\n  }, __jsx(\"div\", {\n    className: classes.paper\n  }, __jsx(\"h2\", {\n    id: \"simple-modal-title\"\n  }, \"Are you really want to delete?\"), __jsx(\"p\", {\n    id: \"simple-modal-description\"\n  }, \"You will permanently delete this note.\"), __jsx(Button, {\n    className: classes.button,\n    variant: \"outlined\",\n    color: \"secondary\",\n    onClick: handleDelete\n  }, \"Delete\"), __jsx(Button, {\n    className: classes.button,\n    variant: \"outlined\",\n    color: \"default\",\n    onClick: handleModalClose\n  }, \"Cancel\")))) : __jsx(React.Fragment, null, __jsx(\"input\", {\n    value: title,\n    className: classes.title,\n    onChange: e => handleTitleChange(e)\n  }), __jsx(Menu, {\n    id: \"dot-menu\",\n    anchorEl: anchorEl,\n    keepMounted: true,\n    open: Boolean(anchorEl),\n    onClose: handlePopoverClose\n  }, __jsx(MenuItem, {\n    onClick: handleMoveToTrash\n  }, \"Move to trash\")), __jsx(\"span\", {\n    className: classes.dot,\n    onClick: handlePopoverOpen\n  }, __jsx(HiDotsHorizontal, null)), !!ReactQuill && isOpen && __jsx(ReactQuill, {\n    theme: theme,\n    onChange: handleChange,\n    value: contents,\n    modules: modules,\n    formats: formats,\n    bounds: '.app',\n    placeholder: placeholder,\n    className: classes.editor\n  })));\n}","map":null,"metadata":{},"sourceType":"module"}